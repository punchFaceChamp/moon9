#pragma once

#include <moon9/spatial/vec.hpp>

namespace viewport
{

/*
   This function joins/splits screen viewports.

   x,y ((0,0)..(w,h)) - Screen coordinate which breaks resolution into 4 parts. Check diagrams below for a few examples.

   > For a w:320 x h:240 case...
   >
   > +-------+-------+ (x,y) = (160,120)  +-----------+---+ (x,y) = (240,180)  +---------------+ (x,y) = (319,239)
   > |       |       |                    |           |   |                    |               |
   > |   0   |   1   |                    |           |   |                    |               |
   > |       |       |                    |     0     | 1 |                    |               |
   > +-------P-------+                    |           |   |                    |       0       |
   > |       |       |                    |           |   |                    |               |
   > |   2   |   3   |                    +-----------P---+                    |               |
   > |       |       |                    |     2     | 3 |                    |               |
   > +-------+-------+                    +-----------+---+                    +---------------P
   >
   >
   > +-------+-------+ (x,y) = (160,239)  +---------------+ (x,y) = (0,239)    +---------------+ (x,y) = (0,120)
   > |       |       |                    |               |                    |               |
   > |       |       |                    |               |                    |       1       |
   > |       |       |                    |               |                    |               |
   > |   0   |   1   |                    |       1       |                    P---------------+
   > |       |       |                    |               |                    |               |
   > |       |       |                    |               |                    |       3       |
   > |       |       |                    |               |                    |               |
   > +-------P-------+                    P---------------+                    +---------------+
   >
   >
   > P---------------+ (x,y) = (0,0)      +---+-----------+ (x,y) = (80,60)    +-------P-------+ (x,y) = (160,0)
   > |               |                    | 0 |     1     |                    |       |       |
   > |               |                    +---P-----------+                    |       |       |
   > |               |                    |   |           |                    |       |       |
   > |       3       |                    |   |           |                    |   2   |   3   |
   > |               |                    | 2 |     3     |                    |       |       |
   > |               |                    |   |           |                    |       |       |
   > |               |                    |   |           |                    |       |       |
   > +---------------+                    +---+-----------+                    +-------+-------+
   >
   >
   > +---------------P (x,y) = (319,0)    +---------------+ (x,y) = (319,120)
   > |               |                    |               |
   > |               |                    |       0       |
   > |               |                    |               |
   > |       2       |                    +---------------P
   > |               |                    |               |
   > |               |                    |       2       |
   > |               |                    |               |
   > +---------------+                    +---------------+                     etc...
   >
*/

   // split screen interface

	void update( size_t w, size_t h, size_t x, size_t y );
	bool pass( int i );
	glm::vec4 get( int i );

   // classic interface

   void update( size_t w, size_t h );
   bool pass();
   glm::vec4 get();
}

